<!DOCTYPE html>
<html>
<body>

<h2>GET Parameter Form</h2>

<form id="paramForm">
  Target ID: <input type="text" id="targetid" name="targetid"><br>
  Cmd: <input type="text" id="cmd" name="cmd"><br>
  Key: <input type="text" id="key" name="key"><br>
  Value: <input type="text" id="value" name="value"><br>
  <input type="button" value="Add Parameter" onclick="addParameter()">
</form>

<button onclick="submitRequest()">Submit Request</button>

<script>
let params = new URLSearchParams();

function addParameter() {
  let targetid = document.getElementById('targetid').value;
  let cmd = document.getElementById('cmd').value;
  let key = document.getElementById('key').value;
  let value = document.getElementById('value').value;
  
  params.set('targetid', targetid);
  params.set('cmd', cmd);

  if (!params.has(key)) {
    params.append(key, value);
  }
}

function submitRequest() {
  let url = 'http://example.com?' + params.toString();

  fetch(url)
    .then(response => response.text())
    .then(data => console.log(data))
    .catch((error) => {
      console.error('Error:', error);
    });
}
</script>

</body>
</html>
